// ImageResizer.js
export default function ImageResizer() {
    return (
        <div className="p-4">
            <h1 className="text-xl font-bold mb-4">Image Resizer</h1>
            <input type="file" id="fileInput" accept="image/*" multiple className="mb-4 border p-2" />
            <button onClick={handleFile} className="bg-blue-500 text-white p-2 rounded">Upload & Resize</button>
        </div>
    );
}

function handleFile(event) {
    const files = document.getElementById('fileInput').files;
    if (!files.length) return;
    
    for (const file of files) {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function (e) {
            const img = new Image();
            img.src = e.target.result;
            img.onload = function () {
                processImage(img, file.name);
            };
        };
    }
}

function processImage(img, fileName) {
    const sizes = [
        { name: 'icon.png', width: 29, height: 29, format: 'image/png' },
        { name: 'icon@2x.png', width: 58, height: 58, format: 'image/png' },
        { name: 'icon@3x.png', width: 87, height: 87, format: 'image/png' },
        { name: 'logo.png', width: 100, height: 50, format: 'image/png' },
        { name: 'logo@2x.png', width: 200, height: 100, format: 'image/png' },
        { name: 'logo@3x.png', width: 300, height: 150, format: 'image/png' }
    ];
    
    sizes.forEach(size => {
        resizeImage(img, size.width, size.height, size.name, size.format);
    });
}

function resizeImage(img, width, height, outputName, format) {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    ctx.drawImage(img, 0, 0, width, height);
    
    canvas.toBlob(blob => {
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = outputName;
        link.click();
    }, format);
}
